#!/bin/sh

set -e

## Install any extra packages needed.
prefix=
#prefix="--prefix /home/cgibbard/local"

for x in oeis brainfuck plugins show smallcheck numbers arrows parallel unlambda logict
   do cabal $prefix install --global $x
      done

## Install lambdabot-utils
cd lambdabot-utils
runghc Setup.hs clean
cabal $prefix install --global
cd ..

## And finally lambdabot.
runghc Setup.hs clean
cabal install --libdir=`pwd`/lib --bindir=`pwd` --docdir=`pwd`/doc
ghc -v0 -c -O2 -funbox-strict-fields -odir . -hidir . scripts/SmallCheck.hs

