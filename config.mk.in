#
# System-specific settings
#

PREFIX=         @prefix@
BINDIR=         @prefix@/bin
LIBDIR=         @prefix@/lib/$(PKG)
DATADIR=        @prefix@/share/doc/$(PKG)
MANDIR=         @prefix@/man
IFACEDIR=       $(LIBDIR)/imports

GHC=            @WithGhc@

# We turn of the incomplete patterns, as it complains on a lot of Module
# instances that we know are perfectly ok, due to the dispatch mechanism
HC_OPTS=        -Wall -Werror -fglasgow-exts -I.
HC_OPTS+=       -pgmF ./BotPP -F
HC_OPTS+=       -funbox-strict-fields -O -fasm
HC_OPTS+=       -fno-warn-incomplete-patterns -fno-warn-missing-methods -fno-warn-orphans 
#HC_OPTS+=       -Onot -H64m

# user-specified
HC_OPTS+=	$(EXTRA_HC_OPTS)

# if they want prof, they need static too
ifeq "$(way)" "p"
static=yes
endif

# build it really fast
ifeq "$(way)" "fast"
HC_OPTS+=       -Onot -fasm -H64m
endif

PLUGINS=       Dict Dummy Karma Quote Seen State \
               Topic Type Plugs Babel Version More Pl \
               Help Dice Search Vixen Fact Spell Todo \
               Haddock Hoogle Where Elite Localtime Poll \
               Djinn Pretty Compose Lambda Unlambda Log \
               Slap DrHylo Instances Fresh Tell
#              LShell DarcsPatchWatch Code

STATICS=       Base System Dynamic
LD_OPTS=       -package plugins
else
PLUGINS=
STATICS=       Base System Dict Dummy Karma \
               Quote Seen State Topic Type Plugs Babel \
               Version More Pl Help Dice Search Vixen Fact \
               Todo Spell Haddock Hoogle Where \
               Elite Localtime Poll Djinn Pretty Compose \
               Lambda Unlambda Log Slap DrHylo Instances Fresh
#              LShell DarcsPatchWatch Code
LD_OPTS=       -package network -package posix -package parsec -package fps -package haskell-src -package readline
endif

GHC_VERSION=	@GHC_VERSION@
GLASGOW_HASKELL=@GLASGOW_HASKELL@

#
# Possibly this will be a problem in the future
#
LD_OPTS+=	                -threaded
RECURSIVE_MODULE_SUFFIX=	hs-boot

HADDOCK=        @HaddockCmd@
HADDOCK_OPTS=   -h

ASPELL=         @AspellCmd@
