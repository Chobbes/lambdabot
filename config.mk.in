#
# System-specific settings
#

PREFIX=         @prefix@
BINDIR=         @prefix@/bin
LIBDIR=         @prefix@/lib/$(PKG)
DATADIR=        @prefix@/share/doc/$(PKG)
MANDIR=         @prefix@/man
IFACEDIR=       $(LIBDIR)/imports

GHC=            @WithGhc@

HC_OPTS=        -Wall -Werror -cpp -fglasgow-exts -I.
HC_OPTS+=       -funbox-strict-fields -O2 -fvia-C
#HC_OPTS+=       -Onot -fasm -H64m

#HC_OPTS+=      -debug 
#HC_OPTS+=	-fignore-asserts 

# user-specified
HC_OPTS+=	$(EXTRA_HC_OPTS)

# if they want prof, they need static too
ifeq "$(way)" "p"
static=yes
endif

#
# List of modules to statically link, or to load dynamically
#
# edit this to change which modules you'd like to use.
#
ifneq "$(static)" "yes"
PLUGINS=       Dict Dummy Lambda Karma Quote Seen State \
               Topic Type Plugs Babel Version More Pl \
               Help Dice Search Vixen Fact Spell Todo \
               Haddock Code Hoogle DarcsPatchWatch Where Elite
STATICS=       Base System Dynamic
LD_OPTS=       -package plugins
else
PLUGINS=
STATICS=       Base System Dict Dummy Lambda Karma \
               Quote Seen State Topic Type Plugs Babel \
               Version More Pl Help Dice Search Vixen Fact \
               Spell Haddock Code Hoogle DarcsPatchWatch Where Elite
LD_OPTS=       -package network -package posix -package parsec
endif

GHC_VERSION=	@GHC_VERSION@
GLASGOW_HASKELL=@GLASGOW_HASKELL@

#
# Possibly this will be a problem in the future
#
ifeq "$(GLASGOW_HASKELL)" "602"
PKG_OPTS+=	                -package posix
RECURSIVE_MODULE_SUFFIX=	hi-boot
MODULE_HI_BOOT=             "module Modules where { plugins::[[GHC.Base.Char]] }"
else
HC_OPTS+=	                -threaded
RECURSIVE_MODULE_SUFFIX=	hs-boot
MODULE_HI_BOOT=             "module Modules where { plugins::[[Char]] }"
endif

HADDOCK=        @HaddockCmd@
HADDOCK_OPTS=   -h

ASPELL=         @AspellCmd@

INSTALL=        sh $(TOPDIR)/install-sh -c
INSTALL_PROGRAM=$(INSTALL) -m 755
INSTALL_DATA=   $(INSTALL) -m 644
INSTALL_DIR=    mkdir -p
